~header.tal

|0000
@in $2
@here $2
@dictptr $2
@base $2


|0100
  ;on-key .Controller/vector DEO2
  ;on-console .Console/vector DEO2

  ;tib .in STZ2
  ;memory .here STZ2
  #0010 .base STZ2
  ;Builtin-emit .dictptr STZ2

  ;prompt ;print-str JSR2
BRK


@on-key ( callback )
  .Controller/key DEI
  STHk
  K_ESC NEQ ,&end JCN
    HALT
  &end
BRK


@on-console ( callback )
  ;do-char JSR2
BRK

~forth.tal

